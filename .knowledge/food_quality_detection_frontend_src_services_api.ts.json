{"is_source_file": true, "format": "TypeScript", "description": "This file contains TypeScript code defining types, constants, utility functions, and public interfaces related to analyzing images of food items for quality assessment, including mock analysis support and file loading functions.", "external_files": ["fetch", "import.meta.env"], "external_methods": ["fetch", "setTimeout", "clearTimeout", "JSON.parse", "File.text()"], "published": ["Indicator", "AnalysisResult", "AnalyzeResponse", "analyzeImage", "loadAssessmentFromFile"], "classes": [], "methods": [{"name": "function getBase(): string { getBase", "description": "Retrieves the base URL for API calls from environment variables.", "scope": "", "scopeKind": ""}, {"name": "export function isMockMode(): boolean { isMockMode", "description": "Determines if the API should use mock responses based on the base URL.", "scope": "", "scopeKind": ""}, {"name": "function withTimeout<T>(promise: Promise<T>, ms = DEFAULT_TIMEOUT_MS, controller?: AbortControll/ withTimeout", "description": "Wraps a promise with a timeout, aborting if it exceeds the specified duration.", "scope": "", "scopeKind": ""}, {"name": "function buildFormData(file: File): FormData { buildFormData", "description": "Creates a FormData object containing the file to be uploaded.", "scope": "", "scopeKind": ""}, {"name": "function mockAnalyze(file: File): Promise<AnalyzeResponse> { mockAnalyze", "description": "Simulates an analysis response based on file size for testing purposes.", "scope": "", "scopeKind": ""}, {"name": "analyzeImage", "description": "Sends an image file for analysis, either via network request or mock response."}, {"name": "loadAssessmentFromFile", "description": "Loads and parses an existing JSON assessment file, converting it into an analysis result object."}], "calls": ["getBase", "isMockMode", "buildFormData", "fetch", "setTimeout", "clearTimeout", "JSON.parse", "File.text()"], "search-terms": ["api.ts", "AnalysisResult", "analyzeImage", "loadAssessmentFromFile", "mockAnalyze", "public interface", "File parsing", "food quality analysis"], "state": 2, "file_id": 19, "knowledge_revision": 50, "git_revision": "cb87952ef6fad273edd892f61191816541fdd8bd", "revision_history": [{"46": ""}, {"47": ""}, {"48": "cb87952ef6fad273edd892f61191816541fdd8bd"}, {"50": "cb87952ef6fad273edd892f61191816541fdd8bd"}], "ctags": [{"_type": "tag", "name": "AnalysisResult", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^export type AnalysisResult = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "AnalyzeResponse", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^export type AnalyzeResponse =$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "DEFAULT_TIMEOUT_MS", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^const DEFAULT_TIMEOUT_MS = 20000$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "Indicator", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^export type Indicator = { name: string; value: number; unit?: string }$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "buildFormData", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^function buildFormData(file: File): FormData {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "confidence", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^  const confidence = Math.min(0.95, 0.5 + ((size % 1000) \\/ 1000) * 0.45)$/", "language": "TypeScript", "kind": "constant", "scope": "mockAnalyze", "scopeKind": "function"}, {"_type": "tag", "name": "const", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^  const idx = size % 3$/", "language": "TypeScript", "kind": "constant", "scope": "mockAnalyze", "scopeKind": "function"}, {"_type": "tag", "name": "fd", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^  const fd = new FormData()$/", "language": "TypeScript", "kind": "constant", "scope": "buildFormData", "scopeKind": "function"}, {"_type": "tag", "name": "getBase", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^function getBase(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^  const idx = size % 3$/", "language": "TypeScript", "kind": "constant", "scope": "mockAnalyze", "scopeKind": "function"}, {"_type": "tag", "name": "indicators", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^  const indicators = [$/", "language": "TypeScript", "kind": "constant", "scope": "mockAnalyze", "scopeKind": "function"}, {"_type": "tag", "name": "isMockMode", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^export function isMockMode(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "mockAnalyze", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^function mockAnalyze(file: File): Promise<AnalyzeResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "qualities", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^  const qualities: AnalysisResult['quality'][] = ['Fresh', 'Stale', 'Spoiled']$/", "language": "TypeScript", "kind": "constant", "scope": "mockAnalyze", "scopeKind": "function"}, {"_type": "tag", "name": "size", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^  const size = file.size$/", "language": "TypeScript", "kind": "constant", "scope": "mockAnalyze", "scopeKind": "function"}, {"_type": "tag", "name": "timeout", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^  const timeout = new Promise<never>((_, reject) => {$/", "language": "TypeScript", "kind": "constant", "scope": "withTimeout", "scopeKind": "function"}, {"_type": "tag", "name": "withTimeout", "path": "/home/kavia/workspace/code-generation/food-quality-detection-system-42065-42074/food_quality_detection_frontend/src/services/api.ts", "pattern": "/^function withTimeout<T>(promise: Promise<T>, ms = DEFAULT_TIMEOUT_MS, controller?: AbortControll/", "language": "TypeScript", "kind": "function"}], "hash": "2246d67224202f6865bf59923dc57cc3", "format-version": 4, "code-base-name": "food_quality_detection_frontend", "filename": "food_quality_detection_frontend/src/services/api.ts"}